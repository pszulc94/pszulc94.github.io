<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tablica</title>
    <link rel="stylesheet" href="styles2.css">
    <style>
        #bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }
        #todo-form {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }
        #todo-autor {
            margin-top: 10px;
        }
        #todo-submit {
            margin-top: 10px;
        }
        #todo-list li {
            list-style-type: none;
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
<div id="container2" class="container2">Paweł Szulc © 2024</div>
<div class="container" id="main-container">
    <div class="logo">
        <img src="logo.png" alt="Logo">
    </div>
    <form id="todo-form">
        <input type="text" id="todo-text" placeholder="Treść zgłoszenia">
        <input type="text" id="todo-autor" placeholder="Autor">
        <input type="hidden" id="todo-data">
        <button type="button" id="todo-submit">Dodaj</button> <!-- Zmieniono typ przycisku na "button" -->
    </form>
    <ul id="todo-list"></ul>
</div>

<div id="bg"></div>
<script src="three.min.js"></script>
<script src="vanta.waves.min.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.8/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.8/firebase-database.js"></script>
<script>
  VANTA.WAVES({
    el: '#bg',
    mouseControls: true,
    touchControls: true,
    gyroControls: false,
    minHeight: 200.00,
    minWidth: 200.00,
    scale: 1.00,
    scaleMobile: 1.00,
    color: 0xf0f0f,
    shininess: 12.00,
    waveHeight: 18.50,
    waveSpeed: 0.75,
    zoom: 0.65
  });

  // Initialize Firebase with your project config
  const firebaseConfig = {
    apiKey: "AIzaSyBIQ2HBVgVAinetxW-2bbkZOQmeasqyyjk",
    authDomain: "foto-tablica.firebaseapp.com",
    projectId: "foto-tablica",
    storageBucket: "foto-tablica.appspot.com",
    messagingSenderId: "102109943597",
    appId: "1:102109943597:web:2749a70fe79944440e25a4"
  };
  firebase.initializeApp(firebaseConfig);

  // Reference to the Firebase Realtime Database
  const database = firebase.database();

  // Reference to the todo list in the database
  const todoRef = database.ref('todo');

  // Handle form submission to add new todo item
  const todoForm = document.getElementById('todo-form');
  const todoText = document.getElementById('todo-text');
  const todoAutor = document.getElementById('todo-autor');
  const todoData = document.getElementById('todo-data');
  const todoList = document.getElementById('todo-list');

  document.getElementById('todo-submit').addEventListener('click', () => { // Obsługa zdarzenia kliknięcia
    const text = todoText.value.trim();
    const autor = todoAutor.value.trim();
    const data = new Date().toISOString();
    if (text !== '') {
      todoRef.push({
        text: text,
        autor: autor,
        data: data
      });
      todoText.value = '';
    }
  });

  // Listen for changes in the todo list
  todoRef.on('value', (snapshot) => {
    todoList.innerHTML = '';
    snapshot.forEach((childSnapshot) => {
      const todoItem = childSnapshot.val();
      const li = document.createElement('li');
      li.textContent = todoItem.text + " - " + todoItem.autor + " - " + todoItem.data;
      todoList.appendChild(li);
    });
  });
</script>
</body>
</html>
